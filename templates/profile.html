{% extends "base.html" %}
{% block content %}

 {% if session.user %}
<div class="container-fluid col-sm-10 col-8 justify-content-center">
<div id="tab-search" class="container-fluid col-10 justify-content-center">
        <form id="search-bar" action="{{ url_for('search') }}" method="post">
            <div class="row justify-content-center">
                <div class="input-field" id="search-bar-input">
                    <input class="form-control mr-sm-2" name="query" id="query" minlength="3" class="validate" type="search" placeholder="Search Recipes" aria-label="Search" required>
                    <label for="query"></label>
                </div>
                </div>
                <div class="row justify-content-center">
                <div id="search-buttons">
                    <a href="{{ url_for('profile', username=session['user']) }}" class="btn btn-outline-dark">Reset</a>
                    <button class="btn btn-outline-info" type="submit" id="search-button">
                        <i class="fas fa-search left"></i> Search</button>
                </div>
            </div>
        </form>
    </div>
    </div>
    {% endif %}
    

<div class="container" id="profile-welcome">
    <div class="row justify-content-center">
        <div class="col-10">
            <div class="card-panel">
                <h3 class="text-center">
                    {{ username }}'s profile
                </h3>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">
    <div class="col-10">
    <h6 class="text-center">Hey, {{ username }}. <br> Here is a Full Index of Our Recipes.</h6>
    </div>
   </div>
   </div>


{% if recipes|length > 0 %}
<div class="container">
<div class="row justify-content-center">
<div class="accordion" id="accordionExample">
    {% for recipe in recipes %}
  <div class="card">
    <div class="card-header" id="headingOne">
      <h2 class="mb-0">
          {% if session.user|lower == recipe.created_by|lower %}
         <!-- Modal Trigger -->
                <button data-target="modal1" class="btn btn-outline-danger modal-trigger">Delete</button>
                <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}" class="btn btn-outline-warning">Edit</a>
                {% endif %}
        <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
        </button>
      </h2>
    </div>
    <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
      <div class="card-body"> 
           <div class="col-sm-9">
        <strong>{{ recipe.recipe_name }}</strong> : {{ recipe.due_date }}
        {% if recipe.is_urgent == "on" %}
        <i class="fas fa-star yellow-text text-shadow tooltipped"
        data-bs-toggle="tooltip" data-bs-placement="top" title="I'm a Favourite"></i>
        {% endif %}
  </div> 
      </div>
    </div>
</div>
</div>
</div>
</div>
<!-- Vertically centered modal --
<div class="modal-dialog modal-dialog-centered">
 <div class="modal-content">
         <h4>You are About to Delete</h4>
         <p>Are you sure you want to delete this recipe?</p>
    </div>
     <div class="modal-footer">
         <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}" class="modal-close btn btn-success">Yes</a>
         <a href="#!" class="modal-close btn btn-danger">No</a>
    </div>
</div>----------->


{% endfor %}


{% else %}
 <h3 class="text-center">No Results Found</h3>
{% endif %}


{% endblock %}